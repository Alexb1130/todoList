!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t);var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=t}var t,n,r;return t=e,(n=[{key:"getItem",value:function(e){return this.state.find(function(t){return t.id==e})}},{key:"addItem",value:function(e){return this.state.push(e),e}},{key:"updateItem",value:function(e,t){var n=this.getItem(e);return Object.keys(t).forEach(function(e){return n[e]=t[e]}),n}},{key:"removeItem",value:function(e){var t=this.state.findIndex(function(t){return t.id==e});t>-1&&this.state.splice(t,1)}}])&&a(t.prototype,n),r&&a(t,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=document.querySelector(".form"),this.input=document.querySelector(".task-edit"),this.list=document.querySelector(".tasks-container"),this.listCompleted=document.querySelector(".tasks-container-completed"),this.taskTemplate=document.querySelector(".task-template").content}var t,n,a;return t=e,(n=[{key:"createItem",value:function(e){var t=this.taskTemplate.cloneNode(!0).querySelector(".task"),n=(t.querySelector(".task-content").textContent=e.title,t.querySelector(".my-checkbox"));return t.dataset.id=e.id,e.completed?(t.classList.add("completed","list-group-item-success"),n.checked=!0):t.classList.remove("completed","list-group-item-success"),t}},{key:"addItem",value:function(e){var t=this.createItem(e);this.input.value="",this.list.append(t)}},{key:"handleEditing",value:function(e){var t=e.target.classList.contains("btn-edit"),n=e.target.closest(".task");if(t){e.preventDefault(),n.classList.toggle("editing");var a=n.querySelector(".task-content"),r=n.querySelector(".task-input");r.focus(),n.classList.contains("editing")?r.value=a.textContent:a.textContent=r.value}}},{key:"handleRemove",value:function(e){var t=e.target.classList.contains("btn-remove"),n=e.target.closest(".task");t&&(e.preventDefault(),n.remove())}},{key:"handleCompleted",value:function(e){var t=e.target.classList.contains("my-checkbox"),n=e.target.closest(".task");t&&((t=e.target).checked?n.classList.add("completed","list-group-item-success"):n.classList.remove("completed","list-group-item-success"))}},{key:"loadData",value:function(e){var t=this;e&&e.forEach(function(e){t.list.append(t.createItem(e))})}}])&&o(t.prototype,n),a&&o(t,a),e}();function s(e){var t=JSON.stringify(e);localStorage.setItem("tasks",t)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.view=n,this.addItem(),this.addEventListeners()}var t,n,a;return t=e,(n=[{key:"addItem",value:function(){var e=this;this.view.form.addEventListener("submit",function(t){if(t.preventDefault(),e.view.input.value){console.log(e.view.input.value);var n=e.model.addItem({id:Date.now(),title:e.view.input.value,completed:!1});e.view.addItem(n),s(e.model)}else alert("Поле должно быть заполненно")})}},{key:"addEventListeners",value:function(){var e=this;document.addEventListener("click",function(t){switch(t.target.getAttribute("data-command")){case"edit":var n=t.target.closest(".task"),a=n.dataset.id;e.view.handleEditing(t);var r=n.querySelector(".task-content").textContent;e.model.updateItem(a,{title:r}),s(e.model);break;case"remove":a=(n=t.target.closest(".task")).dataset.id,e.view.handleRemove(t),e.model.removeItem(a),s(e.model);break;case"completed":var o=t.target;a=(n=o.closest(".task")).dataset.id,e.view.handleCompleted(t),o.checked?(e.model.updateItem(a,{completed:!0}),s(e.model)):(e.model.updateItem(a,{completed:!1}),s(e.model))}})}}])&&c(t.prototype,n),a&&c(t,a),e}(),u=function(){var e=localStorage.getItem("tasks"),t=JSON.parse(e);return null===t?[]:t}(),d=new r(u.state),f=new i;f.loadData(u.state);new l(d,f)}]);